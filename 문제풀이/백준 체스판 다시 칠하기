import sys
input = sys.stdin.readline

n,m = map(int,input().split())
board =[input().strip() for _ in range(n)]

def repaint_cost(sr,sc):
    # sr, sc 를 왼쪽 위로 하는 8x8 부분판의 재칠 비용 계산
    cntW = 0  # (sr,sc)가 'W'로 시작하는 이상적 체스판과의 불일치 수
    cntB = 0  # (sr,sc)가 'B'로 시작하는 이상적 체스판과의 불일치 수
    
    for i in range(8):
        for j in range(8):
            cur = board[sr+i][sc+j]
            # (i + j) 짝수면 시작색과 같아야 하고, 홀수면 반대여야 함
            if (i + j) % 2 == 0:
                # W 시작 패턴: 짝수 자리는 W, B 시작 패턴: 짝수 자리는 B
                if cur != 'W':
                    cntW += 1
                if cur != 'B':
                    cntB += 1
            else:
                # 홀수 자리는 시작색의 반대
                if cur != 'B':
                    cntW += 1
                if cur != 'W':
                    cntB += 1
    return min(cntW, cntB)

ans = 64  # 최대 8x8 전부 칠하는 경우
for r in range(n - 7):
    for c in range(m - 7):
        ans = min(ans, repaint_cost(r, c))

print(ans)


#입력
# 10 13
# BBBBBBBBWBWBW
# BBBBBBBBBWBWB
# BBBBBBBBWBWBW
# BBBBBBBBBWBWB
# BBBBBBBBWBWBW
# BBBBBBBBBWBWB
# BBBBBBBBWBWBW
# BBBBBBBBBWBWB
# WWWWWWWWWWBWB
# WWWWWWWWWWBWB

#출력
#12